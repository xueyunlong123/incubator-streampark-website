<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-community docs-doc-id-submit_guide/code_style_and_quality_guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">代码风格和质量指南 | Apache StreamPark (incubating)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://streampark.apache.org/zh-CN/community/submit_guide/code_style_and_quality_guide"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-community-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-community-current"><meta data-rh="true" property="og:title" content="代码风格和质量指南 | Apache StreamPark (incubating)"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/zh-CN/image/favicon.ico"><link data-rh="true" rel="canonical" href="https://streampark.apache.org/zh-CN/community/submit_guide/code_style_and_quality_guide"><link data-rh="true" rel="alternate" href="https://streampark.apache.org/community/submit_guide/code_style_and_quality_guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://streampark.apache.org/zh-CN/community/submit_guide/code_style_and_quality_guide" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://streampark.apache.org/community/submit_guide/code_style_and_quality_guide" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Apache StreamPark (incubating) RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Apache StreamPark (incubating) Atom Feed"><link rel="stylesheet" href="/zh-CN/assets/css/styles.3b51e483.css">
<link rel="preload" href="/zh-CN/assets/js/runtime~main.94c2bce0.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/main.7ac3fb98.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><div class="navbar__logo"><img src="/zh-CN/image/logo.png" alt="StreamPark Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh-CN/image/logo.png" alt="StreamPark Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/zh-CN/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/zh-CN/download">下载</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">社区</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/foundation/policies/conduct" target="_blank" rel="noopener noreferrer" class="dropdown__link">行为守则</a></li><li><a class="dropdown__link" href="/zh-CN/community/contribution_guide/mailing_lists">加入邮件列表</a></li><li><a class="dropdown__link" href="/zh-CN/community/contribution_guide/become_committer">成为 Committer</a></li><li><a class="dropdown__link" href="/zh-CN/community/contribution_guide/become_pmc_member">成为 PMC 成员</a></li><li><a class="dropdown__link" href="/zh-CN/community/contribution_guide/new_committer_process">新的 Committer 流程</a></li><li><a class="dropdown__link" href="/zh-CN/community/contribution_guide/new_pmc_ember_process">新的 PMC 成员流程</a></li><li><a class="dropdown__link" href="/zh-CN/community/submit_guide/document">文档</a></li><li><a class="dropdown__link" href="/zh-CN/community/submit_guide/submit_code">提交代码</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-CN/community/submit_guide/code_style_and_quality_guide">代码风格和质量指南</a></li><li><a class="dropdown__link" href="/zh-CN/community/release/how_to_release">如何发版</a></li><li><a class="dropdown__link" href="/zh-CN/community/release/how_to_verify_release">如何验证发版</a></li></ul></div><a class="navbar__item navbar__link" href="/zh-CN/team">团队</a><a class="navbar__item navbar__link" href="/zh-CN/user">用户</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">基金会</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">证书</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">事件</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">安全</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">赞助</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">致谢</a></li></ul></div><a class="navbar__item navbar__link" href="/zh-CN/blog">博客</a><a href="https://github.com/apache/incubator-streampark/issues/507" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">FAQ</a><a href="https://github.com/apache/incubator-streampark" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/community/submit_guide/code_style_and_quality_guide" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh-CN/community/submit_guide/code_style_and_quality_guide" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为暗黑模式）" aria-label="切换浅色/暗黑模式（当前为暗黑模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/community/contribution_guide/mailing_lists">贡献指引</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh-CN/community/submit_guide/document">代码提交</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/community/submit_guide/document">文档说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/community/submit_guide/submit_code">提交代码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-CN/community/submit_guide/code_style_and_quality_guide">代码风格和质量指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/community/release/how_to_release">版本发布</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-CN/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">代码提交</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">代码风格和质量指南</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>代码风格和质量指南</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-拉取请求与变更规则">1 拉取请求与变更规则<a href="#1-拉取请求与变更规则" class="hash-link" aria-label="1 拉取请求与变更规则的直接链接" title="1 拉取请求与变更规则的直接链接">​</a></h2><ol><li><p><code>ISSUE</code>/<code>PR</code>(拉取请求) 的引导和命名</p><ul><li><p>确保 <code>PR</code> 与 <code>ISSUE</code> 相对应。</p><blockquote><p><strong>注意</strong>：<code>Hotfix</code> 问题不需要遵循此规则，例如修复 <code>JavaDoc</code> 或 <code>document</code> 文件中的拼写错误。</p></blockquote></li><li><p>标题命名格式<br>
<!-- -->当命名 <code>PR</code> 时，可以参考拉取请求的 <code>[ISSUE-XXXX][Feature/Improve/Refactor/Bug/Cleanup] Title</code>，
其中 <code>ISSUE-XXXX</code> 应替换为实际的 <code>ISSUE</code> 编号。</p><ul><li>第二部分描述了 <code>PR</code> 的类型，例如新功能、改进、重构等。</li><li>如果所有对 <code>PR</code> 的更改都在某个模块或组件内，则可以在提交消息中指示。</li></ul></li></ul></li><li><p>描述</p><ul><li>请填写 <code>PR</code> 模板以描述贡献。这样，审阅者可以从描述中，而不仅仅是从代码中，了解问题和解决方案。</li><li>确保描述足以说明 <code>PR</code> 所解决的问题。</li><li>小的更改不需要过多的描述。</li><li>在理想情况下，问题描述在 <code>ISSUE</code> 中，大部分描述都是从那里复制的。</li></ul></li><li><p>尝试将更改分解为纯类型的更改</p><ul><li>建议 <code>PR</code> 应将诸如 <code>Cleanup</code>、<code>Refactor</code>、<code>Improve</code> 和 <code>Feature</code> 之类的更改排列到分隔的 <code>PRs</code>/<code>Commits</code> 中。</li><li>这样，审阅者可以独立查看清理和重构，并确保这些更改不会更改行为。</li><li>然后，审阅者可以独立审查核心更改，并确保它们是干净和健壮的更改。</li><li>在极端情况下，如果需要回滚提交，它可以为版本回滚选择提供最佳的粒度。</li><li>此外，重大贡献应分解为一组可以独立审查的独立更改。</li></ul></li><li><p>提交消息<br>
<!-- -->消息的提交应遵循与 <code>PR</code> 类似的模式：<code>[ISSUE-XXXX][Feature/Improve/Refactor/Cleanup] 拉取请求的标题</code>。</p><ul><li><code>[ISSUE-xxxx1][Improve(ment)] 改进 ...</code></li><li><code>[ISSUE-xxxx2][Refactor] 重构 ...</code></li><li><code>[ISSUE-xxxx3][Feature] 支持 ...</code></li><li><code>[ISSUE-xxxx4][Bug] 修复  ...</code></li><li><code>[ISSUE-xxxx5][Feature][subtask] 支持 ...</code></li><li><code>[Hotfix][module_name] 修复 xxx 注释 ...</code></li></ul></li></ol><blockquote><p><strong>注意</strong>：尝试使用 git 历史记录而不是带注释的代码（不是强制的）</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-代码检查样式">2 代码检查样式<a href="#2-代码检查样式" class="hash-link" aria-label="2 代码检查样式的直接链接" title="2 代码检查样式的直接链接">​</a></h2><ul><li><p>后端代码格式化 Maven 插件：<code>spotless</code>
在安装插件后，只需在项目仓库根目录中运行 <code>mvn spotless:apply</code>。</p></li><li><p>后端代码规范 Maven 插件：<code>checkstyle</code>
在安装插件后，只需运行 <code>mvn checkstyle:checkstyle</code>。</p></li><li><p>前端代码格式化插件 <code>eslint</code></p><ul><li>原始命令是 <code>npx eslint --cache --max-warnings 0 &quot;{src,mock}/**/*.{vue,ts,tsx}&quot; --fix</code></li><li>封装为 <code>npm run lint:eslint</code></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-编程规范">3 编程规范<a href="#3-编程规范" class="hash-link" aria-label="3 编程规范的直接链接" title="3 编程规范的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-命名风格">3.1 命名风格<a href="#31-命名风格" class="hash-link" aria-label="3.1 命名风格的直接链接" title="3.1 命名风格的直接链接">​</a></h3><ol><li><p>优先为变量命名选择名词，这样更容易区分<code>变量</code>或<code>方法</code>。</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Cache&lt;String&gt; publicKeyCache;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>变量的拼音缩写是禁止的（排除地名等名词），例如chengdu。</p></li><li><p>推荐的变量名以 <code>类型</code> 结尾。
对于 <code>Collection/List</code> 类型的变量，取 <code>xxxx</code> （复数表示多个元素）或以 <code>xxxList</code> （特定类型）结束。
对于 <code>map</code> 类型的变量，清晰地描述 <code>key</code> 和 <code>value</code>：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Map&lt;Long, User&gt; idUserMap;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Map&lt;Long, String&gt; userIdNameMap;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>通过其名称直观地知道变量的类型和含义。
方法名称应首先以动词开始，如下所示：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  void computeVcores(Object parameter1);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>注意：在 <code>Builder</code> 工具类中不必严格遵循这项规则。</p></blockquote></li><li><p>数据库层（非服务层）的基本 <code>CRUD</code> 的方法名称应根据 <code>com.baomidou.mybatisplus.core.mapper.BaseMapper</code> 的名称统一标准化：</p><ul><li><p>如果执行数据库查询操作，方法的名称应以 <code>select</code> 开头。</p><p>当查询单条记录时可以使用<code>selectXxx</code>，例如<code>selectApp</code></p><p>当查询多条记录时可以使用<code>selectXxxs</code>表示集合结果，例如<code>selectApps</code>，如果实体以<code>s</code>结尾，可以使用<code>List</code>如<code>selectStatusList</code>；</p><p>如果是分页结果，则可以使用<code>selectPage</code>；如果是<code>Map</code>结果，建议参考<code>Map</code>命名规则如<code>selectIdUserMap</code></p><p>当查询包含具体条件时可以使用<code>selectXxxByXxx</code>命名，例如<code>listById</code>、<code>selectAppsByProjectId</code></p><blockquote><p>如遇到太长的实体可以酌情缩写，原则是“见名知意”且做到不啰嗦，例如<code>selectApplications</code>缩写为<code>selectApps</code>，但如果没有合适的缩写，不建议缩写
如果是<code>Mapper</code>查询<code>selectRecentK8sClusterIds</code>，则也可以采取<code>selectList</code>命名</p></blockquote></li><li><p>如果执行数据库的 <mark> 更新 </mark> 语句操作，方法的名称应以 <code>update</code> 开头。</p></li><li><p>如果执行数据库的 <mark> 插入 </mark> 语句操作，方法的名称应以 <code>insert</code> 开头。</p></li><li><p>如果执行数据库的 <mark> 删除 </mark> 语句操作，方法的名称应以 <code>delete</code> 开头。</p></li></ul></li><li><p>服务层的基本 <code>CRUD</code> 方法命名应参考 <code>com.baomidou.mybatisplus.extension.service.IService</code>：</p><ul><li>如果执行数据库的 <mark> 选择 </mark> 操作来查询多个记录，方法的名称应以 <code>list</code> 开头，例如 <code>listByIds</code>、<code>listByXxx</code>。</li><li>如果执行数据库的 <mark> 选择 </mark> 操作查询单个记录，方法的名称应以 <code>get</code> 开头，例如 <code>getByName</code> 和 <code>getOne</code>。</li><li>如果执行数据库的 <mark> 更新 </mark> 操作，方法的名称应以 <code>update</code> 开头。</li><li>如果执行数据库的 <mark> 插入 </mark> 操作，方法的名称应以 <code>save</code> 开头。</li><li>如果执行数据库的 <mark> 删除 </mark> 操作，方法的名称应以 <code>remove</code> 开头。</li></ul></li><li><p>参数的命名</p><ul><li>最好保持同一接口中相同类型的参数的命名一致。</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-常量变量定义">3.2 常量变量定义<a href="#32-常量变量定义" class="hash-link" aria-label="3.2 常量变量定义的直接链接" title="3.2 常量变量定义的直接链接">​</a></h3><ol><li><p>将所有类的 <code>serialVersionUID</code> 设置为 <code>1L</code>，遵循 <code>Flink</code> 的 <code>serialVersionUID</code>。</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  private static final long serialVersionUID = -8713837118340960775L;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> private static final long serialVersionUID = 1L;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>多余的字符串应提取为常量</p><blockquote><p>如果一个常量被硬编码两次或多次，请直接提取它为常量并更改相应的引用。
通常，<code>log</code> 中的常量可以忽略提取。</p></blockquote><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static RestResponse success(Object data) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    RestResponse resp = new RestResponse();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resp.put(&quot;status&quot;, &quot;success&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resp.put(&quot;code&quot;, ResponseCode.CODE_SUCCESS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resp.put(&quot;data&quot;, data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return resp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static RestResponse error() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    RestResponse resp = new RestResponse();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resp.put(&quot;status&quot;, &quot;error&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resp.put(&quot;code&quot;, ResponseCode.CODE_FAIL);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resp.put(&quot;data&quot;, null);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return resp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><blockquote><p>字符串提取为常量引用。</p></blockquote><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public static final String STATUS = &quot;status&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public static final String CODE = &quot;code&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public static final String DATA = &quot;data&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public static RestResponse success(Object data) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      RestResponse resp = new RestResponse();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      resp.put(STATUS, &quot;success&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      resp.put(CODE, ResponseCode.CODE_SUCCESS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      resp.put(DATA, data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return resp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public static RestResponse error() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      RestResponse resp = new RestResponse();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      resp.put(STATUS, &quot;error&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      resp.put(CODE, ResponseCode.CODE_FAIL);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      resp.put(DATA, null);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return resp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>确保代码的可读性和直观性</p></li></ol><ul><li><p><code>annotation</code> 符号中的字符串不需要提取为常量。</p></li><li><p>被引用的 <code>package</code> 或 <code>resource</code> 名称不需要提取为常量。</p></li></ul><ol start="4"><li><p>未被重新分配的变量也必须声明为 <mark> final </mark> 类型。</p></li><li><p>关于 <code>constant/variable</code> 行的排序顺序</p><p>按以下顺序对类中的变量行进行排序：</p><ol><li><code>public static final V</code>, <code>static final V</code>,<code>protected static final V</code>, <code>private static final V</code></li><li><code>public static v</code>, <code>static v</code>,<code>protected static v</code>, <code>private static v</code></li><li><code>public v</code>, <code>v</code>, <code>protected v</code>, <code>private v</code></li></ol></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-方法规则">3.3 方法规则<a href="#33-方法规则" class="hash-link" aria-label="3.3 方法规则的直接链接" title="3.3 方法规则的直接链接">​</a></h3><ol><li><p>按照 <code>public</code>、<code>protected</code>、<code>private</code> 的顺序对类中的方法进行排序。</p><p>类的静态方法可以放在非静态方法之后，并根据一致的方法可见性进行排序。</p></li><li><p>当方法有限制时，方法的参数和返回值需要用 <code>@Nonnull</code> 或 <code>@Nullable</code> 注释和约束进行注释。</p><p>例如，如果参数不能为 null，最好添加一个 <code>@Nonnull</code> 注释。如果返回值可以为 null，则应首先添加 <code>@Nullable</code> 注释。</p><mark> 注意：包名为 <code>javax.validation.requirements </code> </mark></li><li><p>如果方法中的代码行数太多，请尝试在适当的点上使用多个子方法来分段方法体。</p><p>一般来说，需要坚持以下原则：</p><ul><li>便于测试</li><li>有好的语义</li><li>易于阅读</li></ul><p>此外，还需要考虑在组件、逻辑、抽象和场景等方面的切割是否合理。</p><blockquote><p>然而，目前还没有明确的演示定义。在演变过程中，我们将为开发者提供更多的示例，以便他们有更清晰的参考和理解。</p></blockquote></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-集合规则">3.4 集合规则<a href="#34-集合规则" class="hash-link" aria-label="3.4 集合规则的直接链接" title="3.4 集合规则的直接链接">​</a></h3><ol><li><p>对于返回的 <code>collection</code> 值，除非有特殊的 <code>concurrent</code> (如线程安全)，总是返回 <code>interface</code>，例如：</p><ul><li>如果使用 <code>ArrayList</code>，则返回 <mark> List </mark></li><li>如果使用 <code>HashMap</code>，则返回 <mark> Map </mark></li><li>如果使用 <code>HashSet</code>，则返回 <mark> Set </mark></li></ul></li><li><p>如果存在多线程，可以使用以下声明或返回类型：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  private CurrentHashMap map;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public CurrentHashMap funName();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>使用 <code>isEmpty()</code> 而不是 <code>length() == 0</code> 或者 <code>size() == 0</code></p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (pathPart.length() == 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (pathPart.isEmpty()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-并发处理">3.5 并发处理<a href="#35-并发处理" class="hash-link" aria-label="3.5 并发处理的直接链接" title="3.5 并发处理的直接链接">​</a></h3><ol><li><p>需要管理 <code>线程池</code>，使用统一的入口点获取 <code>线程池</code>。</p><mark> 注意：在演变过程中，我们将为开发者提供更多的示例，以便他们有更清晰的参考和理解。 </mark></li><li><p><code>线程池</code> 需要进行资源约束，以防止因处理不当导致的资源泄露。</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="36-控制条件语句">3.6 控制/条件语句<a href="#36-控制条件语句" class="hash-link" aria-label="3.6 控制/条件语句的直接链接" title="3.6 控制/条件语句的直接链接">​</a></h3><ol><li><p>避免因不合理的 <code>条件/控制</code> 分支顺序导致：</p><ul><li>多个代码行的 <code>深度</code> 为 <code>n+1</code></li><li>多余的行</li></ul></li></ol><p>一般来说，如果一个方法的代码行深度由于连续嵌套的 <code>if... else..</code> 超过了 <code>2+ Tabs</code>，那么应该考虑试图</p><ul><li><code>合并分支</code>，</li><li><code>反转分支条件</code></li><li><code>提取私有方法</code></li></ul><p>以减少代码行深度并提高可读性，例如：</p><ul><li><p>联合或将逻辑合并到下一级调用中</p><ul><li>负面示例：<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (isInsert) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    save(platform);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     updateById(platform);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>正面示例：<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  saveOrUpdate(platform);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>合并条件</p><ul><li>负面示例：<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (expression1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if(expression2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ......</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>正面示例：  <div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> if (expression1 &amp;&amp; expression2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ......</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>反转条件</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public void doSomething() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // 忽略更深的代码块行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // .....</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   if (condition1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public void doSomething() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // 忽略更深的代码块行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // .....</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   if (!condition1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>使用单一变量或方法减少复杂的条件表达式</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (dbType.indexOf(&quot;sqlserver&quot;) &gt;= 0 || dbType.indexOf(&quot;sql server&quot;) &gt;= 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (containsSqlServer(dbType)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ....</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  //.....</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // containsSqlServer的定义</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><blockquote><p>在未来，使用 <code>sonarlint</code> 和 <code>better highlights</code> 检查代码深度看起来是个不错的选择。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="37-代码注释规则">3.7 代码注释规则<a href="#37-代码注释规则" class="hash-link" aria-label="3.7 代码注释规则的直接链接" title="3.7 代码注释规则的直接链接">​</a></h3><ol><li><p>方法缺少注释：</p><ul><li><code>When</code>：该方法何时可以被调用</li><li><code>How</code>：如何使用此方法以及如何传递参数等</li><li><code>What</code>：此方法实现了哪些功能</li><li><code>Note</code>：在调用此方法时开发人员应注意什么</li></ul></li><li><p>缺少必要的类头部描述注释。</p><p>添加 <code>What</code>，<code>Note</code> 等，如上述 <code>1</code> 中提到的。</p></li><li><p>在接口中的方法声明必须被注释。</p><ul><li><p>如果实现的语义和接口声明的注释内容不一致，则具体的实现方法也需要用注释重写。</p></li><li><p>如果方法实现的语义与接口声明的注释内容一致，则建议不写注释以避免重复的注释。</p></li></ul></li><li><p>在注释行中的第一个词需要大写，如 <code>param</code> 行，<code>return</code> 行。
如果特殊引用作为主题不需要大写，需要注意特殊符号，例如引号。</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="38-java-lambda-表达式">3.8 Java Lambda 表达式<a href="#38-java-lambda-表达式" class="hash-link" aria-label="3.8 Java Lambda 表达式的直接链接" title="3.8 Java Lambda 表达式的直接链接">​</a></h3><ol><li><p>更倾向于使用 <code>non-capturing</code> lambda（不包含对外部范围的引用的lambda）。
Capturing lambda 在每次调用时都需要创建一个新的对象实例。<code>Non-capturing</code> lambda 可以为每次调用使用相同的实例。</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  map.computeIfAbsent(key, x -&gt; key.toLowerCase())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> map.computeIfAbsent(key, k -&gt; k.toLowerCase());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>考虑使用方法引用而不是内联lambda</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  map.computeIfAbsent(key, k-&gt; Loader.load(k));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  map.computeIfAbsent(key, Loader::load);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="39-java-streams">3.9 Java Streams<a href="#39-java-streams" class="hash-link" aria-label="3.9 Java Streams的直接链接" title="3.9 Java Streams的直接链接">​</a></h3><ul><li><p>在任何对性能敏感的代码中避免使用 Java Streams。</p></li><li><p>使用 Java Streams 的主要动机是为了提高代码的可读性。因此，它们可以在代码的某些部分中很好地匹配，这些部分不是数据密集型的，而是处理协调。</p></li><li><p>即使在后一种情况下，也试图限制范围到一个方法，或者一个内部类中的几个私有方法。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="310-前置条件检查">3.10 前置条件检查<a href="#310-前置条件检查" class="hash-link" aria-label="3.10 前置条件检查的直接链接" title="3.10 前置条件检查的直接链接">​</a></h3><ol><li>使用统一的 <code>Utils.requireXXX</code> 来完成前提的验证，如果可能的话，用新的前置条件检查替换 <code>AlertXXException.throwIfXXX</code>。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="311-stringutils">3.11 StringUtils<a href="#311-stringutils" class="hash-link" aria-label="3.11 StringUtils的直接链接" title="3.11 StringUtils的直接链接">​</a></h3><ol><li><p>使用 <code>StringUtils.isBlank</code> 而不是 <code>StringUtils.isEmpty</code></p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (StringUtils.isEmpty(name)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (StringUtils.isBlank(name)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>使用 <code>StringUtils.isNotBlank</code> 而不是 <code>StringUtils.isNotEmpty</code></p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (StringUtils.isNotEmpty(name)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (StringUtils.isNotBlank(name)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>使用 <code>StringUtils.isAllBlank</code> 而不是 <code>StringUtils.isAllEmpty</code></p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (StringUtils.isAllEmpty(name, age)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (StringUtils.isAllBlank(name, age)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="312-enum-类">3.12 <code>Enum</code> 类<a href="#312-enum-类" class="hash-link" aria-label="312-enum-类的直接链接" title="312-enum-类的直接链接">​</a></h3><ol><li><p>枚举值比较</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (status.equals(JobStatus.RUNNING)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (status == JobStatus.RUNNING) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>枚举类不需要实现 Serializable</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public enum JobStatus implements Serializable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public enum JobStatus {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>使用 <code>Enum.name()</code> 而不是 <code>Enum.toString()</code></p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(JobStatus.RUNNING.toString());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(JobStatus.RUNNING.name());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>枚举类名称统一使用 Enum 后缀</p><ul><li><p>负面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public enum JobStatus {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public enum JobStatusEnum {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="313-deprecated-注解">3.13 <code>Deprecated</code> 注解<a href="#313-deprecated-注解" class="hash-link" aria-label="313-deprecated-注解的直接链接" title="313-deprecated-注解的直接链接">​</a></h3><ul><li><p>负面示例:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@deprecated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void process(String input) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Deprecated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void process(String input) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-异常处理">4 异常处理<a href="#4-异常处理" class="hash-link" aria-label="4 异常处理的直接链接" title="4 异常处理的直接链接">​</a></h2><p><code>streampark-console-service</code> 模块是处理用户请求的核心模块。
我们努力提供最好的用户体验是非常必要的。<br>
<!-- -->因此，我们引入了 <a href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/AbstractApiException.java" target="_blank" rel="noopener noreferrer">AbstractApiException</a>
及其子类以获得更友好的交互效果。非 <code>AbstractApiException</code> 被视为内部服务器错误，不需要通知用户交互细节。<br>
<!-- -->基于上述前提，我们需要注意处理 <code>AbstractApiException</code>。<br>
<!-- -->例如，在处理与用户操作错误或缺少数据错误的逻辑时，我们应该通过以下 <code>AbstractApiException</code> 的子类之一抛出异常：</p><ul><li><p><a href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/ApiDetailException.java" target="_blank" rel="noopener noreferrer">ApiDetailException</a></p><blockquote><p>需要通知前端的异常消息，是一个详细的异常消息，例如 stackTrace 信息，通常伴随着大量的异常日志，
例如：<code>Failed to start job</code>，需要在前端显示异常(stackTrace 信息)。</p></blockquote></li><li><p><a href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/ApiAlertException.java" target="_blank" rel="noopener noreferrer">ApiAlertException</a></p><blockquote><p>需要通知前端的异常消息，通常是一个简单、清晰的消息，例如：</p><ol><li>用户名已存在</li><li>没有权限，请联系管理员</li><li>...</li></ol></blockquote></li><li><p><a href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/AlertException.java" target="_blank" rel="noopener noreferrer">AlertException</a></p><blockquote><p>在处理警报逻辑时需要通知前端的异常消息。</p></blockquote></li><li><p>或者其他用于获得良好用户交互的异常。</p></li></ul><p>除了处理异常的分类，我们最好使异常消息准确而简洁，并试图确保异常中遵循以下几点：</p><ul><li>显示异常情况的当前状态。</li><li>显示异常情况的解决方案。</li><li>或其他适合的交互信息。</li></ul><p>如果需要，请点击 <a href="https://github.com/apache/incubator-streampark/issues/2325" target="_blank" rel="noopener noreferrer">Issue-2325</a> 以获取更多关于该项的详细信息。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-日志">5 日志<a href="#5-日志" class="hash-link" aria-label="5 日志的直接链接" title="5 日志的直接链接">​</a></h2><ol><li><p>使用 <code>占位符</code> 进行日志输出：</p><ul><li>负面示例<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  log.info(&quot;Deploy cluster request &quot; + deployRequest);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>正面示例<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  log.info(&quot;load plugin:{} to {}&quot;, file.getName(), appPlugins);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>打印日志时，注意选择 <code>日志级别</code></p><p>当打印日志内容时，如果传递了日志占位符的实际参数，必须避免过早评估，以避免由日志级别导致的不必要评估。</p><ul><li><p>负面示例：</p><p>假设当前日志级别为 <code>INFO</code>：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 忽略声明行。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> List&lt;User&gt; userList = getUsersByBatch(1000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> LOG.debug(&quot;All users: {}&quot;, getAllUserIds(userList));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>正面示例：</p><p>在这种情况下，我们应该在进行实际的日志调用之前提前确定日志级别，如下所示：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 忽略声明行。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> List&lt;User&gt; userList = getUsersByBatch(1000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> if (LOG.isDebugEnabled()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   LOG.debug(&quot;All ids of users: {}&quot;, getAllIDsOfUsers(userList));   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-测试">6 测试<a href="#6-测试" class="hash-link" aria-label="6 测试的直接链接" title="6 测试的直接链接">​</a></h2><ol><li><p>对于用于 <code>测试</code> 的一些 <code>代码/变量</code>，您可以使用 <code>@VisableForTesting</code> 注解来指示。</p></li><li><p>建议使用 <code>JUnit5</code> 进行测试用例的准备。</p></li><li><p>使用 <code>AssertJ</code> 进行断言语句的开发。</p></li><li><p>关于测试的实现。</p><ul><li><p>如果测试用例只测试一个不需要如 hadoop、远程 flink 会话集群等外部组件的 <code>独立</code> 类或方法，可以直接使用 <code>JUnit5</code> 和 <code>Mockito</code> 进行编写。</p></li><li><p>如果测试用例需要一个 <code>真实的数据库</code>、环境或后端环境，
但不需要与外部组件进行交互，建议直接继承 <code>SpringUnitTestBase</code>。</p></li><li><p>如果测试用例需要 <code>真实的数据库、环境</code> 或 <code>后端环境</code>，
但需要与外部组件 (<code>远程 Flink 会话集群</code>、<code>Hadoop 集群</code>) 进行交互，建议通过直接继承 <code>SpringIntegrationTestBase</code> 来编写测试用例。</p></li></ul></li><li><p>只建议在关键测试环节上使用集成测试，以避免使 <code>CI</code> 的开销时间过长和资源负荷过重。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考资料">参考资料<a href="#参考资料" class="hash-link" aria-label="参考资料的直接链接" title="参考资料的直接链接">​</a></h2><ul><li><a href="https://site.mockito.org/" target="_blank" rel="noopener noreferrer">https://site.mockito.org/</a></li><li><a href="https://flink.apache.org/zh/how-to-contribute/code-style-and-quality-preamble/" target="_blank" rel="noopener noreferrer">https://flink.apache.org/zh/how-to-contribute/code-style-and-quality-preamble/</a></li><li><a href="https://alibaba.github.io/p3c/" target="_blank" rel="noopener noreferrer">https://alibaba.github.io/p3c/</a></li><li><a href="https://rules.sonarsource.com/java/" target="_blank" rel="noopener noreferrer">https://rules.sonarsource.com/java/</a></li><li><a href="https://joel-costigliola.github.io/assertj/index.html" target="_blank" rel="noopener noreferrer">https://joel-costigliola.github.io/assertj/index.html</a></li><li><a href="https://junit.org/junit5/" target="_blank" rel="noopener noreferrer">https://junit.org/junit5/</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-CN/community/submit_guide/submit_code"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">提交代码</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-CN/community/release/how_to_release"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">如何进行版本发布</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop" style="opacity:0;transform:translateX(100px) translateZ(0)"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-拉取请求与变更规则" class="table-of-contents__link toc-highlight">1 拉取请求与变更规则</a></li><li><a href="#2-代码检查样式" class="table-of-contents__link toc-highlight">2 代码检查样式</a></li><li><a href="#3-编程规范" class="table-of-contents__link toc-highlight">3 编程规范</a><ul><li><a href="#31-命名风格" class="table-of-contents__link toc-highlight">3.1 命名风格</a></li><li><a href="#32-常量变量定义" class="table-of-contents__link toc-highlight">3.2 常量变量定义</a></li><li><a href="#33-方法规则" class="table-of-contents__link toc-highlight">3.3 方法规则</a></li><li><a href="#34-集合规则" class="table-of-contents__link toc-highlight">3.4 集合规则</a></li><li><a href="#35-并发处理" class="table-of-contents__link toc-highlight">3.5 并发处理</a></li><li><a href="#36-控制条件语句" class="table-of-contents__link toc-highlight">3.6 控制/条件语句</a></li><li><a href="#37-代码注释规则" class="table-of-contents__link toc-highlight">3.7 代码注释规则</a></li><li><a href="#38-java-lambda-表达式" class="table-of-contents__link toc-highlight">3.8 Java Lambda 表达式</a></li><li><a href="#39-java-streams" class="table-of-contents__link toc-highlight">3.9 Java Streams</a></li><li><a href="#310-前置条件检查" class="table-of-contents__link toc-highlight">3.10 前置条件检查</a></li><li><a href="#311-stringutils" class="table-of-contents__link toc-highlight">3.11 StringUtils</a></li><li><a href="#312-enum-类" class="table-of-contents__link toc-highlight">3.12 <code>Enum</code> 类</a></li><li><a href="#313-deprecated-注解" class="table-of-contents__link toc-highlight">3.13 <code>Deprecated</code> 注解</a></li></ul></li><li><a href="#4-异常处理" class="table-of-contents__link toc-highlight">4 异常处理</a></li><li><a href="#5-日志" class="table-of-contents__link toc-highlight">5 日志</a></li><li><a href="#6-测试" class="table-of-contents__link toc-highlight">6 测试</a></li><li><a href="#参考资料" class="table-of-contents__link toc-highlight">参考资料</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                  <div class="footer-left-box">
                    <div class="flex align-center footer-system">
                      <span class="system-title">About StreamPark</span>
                    </div>
                    <p>Make stream processing easier! easy-to-use streaming application development framework and operation platform</p>
                  </div>
                </li></ul></div><div class="col footer__col"><div class="footer__title">Resource</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/intro">Documentation</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-streampark/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item">版本<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-streampark/issues/507" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/apache/incubator-streampark" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-streampark/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-streampark/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pull Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Follow</div><ul class="footer__items clean-list"><li class="footer__item">
                <div class="subscribe-box">
                  <div class="d-flex align-items-center" style="margin-bottom: 30px;padding-top: 11px">
                    <div class="subscribe-input flex-fill">
                      <input class="form-control" id="email_address" maxlength="60" name="email_address" placeholder="Subscribe with us">
                    </div>
                    <div class="subscribe-submit-inner">
                      <a class="btn btn-white m-0" type="submit" href="mailto:dev-subscribe@streampark.apache.org">
                        <span><i class="fa fa-paper-plane text-white"></i></span>
                      </a>
                    </div>
                  </div>
                  <ul class="icon-bottom">
                    <li>
                      <a href="javascript:void(0)">
                        <i class="fa fa-wechat"></i>
                        <div class="wechat-dropdown"><img src="/image/join_wechat.png" alt="weChat"></div>
                      </a>
                    </li>
                    <li><a href="javascript:void(0)"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="javascript:void(0)"><i class="fa fa-slack"></i></a></li>
                    <li><a href="javascript:void(0)"><i class="fa fa-facebook"></i></a></li>
                  </ul>
                </div>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <div style="text-align: left;margin-top:30px">
          <div class="d-flex align-items-center">
            <div>
              <a href="https://incubator.apache.org/" class="footerLogoLink" one-link-mark="yes">
                <img src="/image/apache-incubator.svg" alt="Apache Incubator logo" class="footer__logo">
              </a>
            </div>
            <div>
              <p style="font-family: Avenir-Medium;font-size: 14px;color: #999;line-height: 25px;">
              Apache StreamPark is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
              </p>
            </div>
          </div>

          <div style="border-top: 1px solid #525252;min-height: 60px;line-height: 25px;text-align: left;font-family: Avenir-Medium;font-size: 14px;color: #999;display: flex;align-items: center;">
            <span>
              Copyright © 2022-2024 The Apache Software Foundation. Apache StreamPark, StreamPark, and its feather logo are trademarks of The Apache Software Foundation.
            </span>
          </div>
        </div></div></div></div></footer></div>
<script src="/zh-CN/assets/js/runtime~main.94c2bce0.js"></script>
<script src="/zh-CN/assets/js/main.7ac3fb98.js"></script>
</body>
</html>